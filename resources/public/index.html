<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">    
    <link href="css/style.css" rel="stylesheet" type="text/css">
    <link href="css/codemirror.css" rel="stylesheet" type="text/css">
    <link href="css/codemirror-merge.css" rel="stylesheet" type="text/css">
    <script src="js/codemirror.js" type="text/javascript"></script>
    <script src="js/diff_match_patch.js"></script>
    <script src="js/codemirror-merge.js" type="text/javascript"></script>

    <script src="js/javascript.js" type="text/javascript"></script>
  </head>

  <body>

    <div id="app"></div>

    <div id="editor"></div>


    <script>
      function mergeViewHeight(mergeView) {
        function editorHeight(editor) {
          if (!editor) return 0;
          return editor.getScrollInfo().height;
        }
        return Math.max(editorHeight(mergeView.leftOriginal()),
                        editorHeight(mergeView.editor()),
                        editorHeight(mergeView.rightOriginal()));
      }

      function resize(mergeView) {
        var height = mergeViewHeight(mergeView);
        for(;;) {
          if (mergeView.leftOriginal())
            mergeView.leftOriginal().setSize(null, height);
          mergeView.editor().setSize(null, height);
          if (mergeView.rightOriginal())
            mergeView.rightOriginal().setSize(null, height);

          var newHeight = mergeViewHeight(mergeView);
          if (newHeight >= height) break;
          else height = newHeight;
        }
        mergeView.wrap.style.height = height + "px";
      }


    
      window.createEditor = function(originalData) {

        var editorElement = document.getElementById("editor");

        window.editor = CodeMirror.MergeView(editorElement, {
                  orig: originalData,
                  value: originalData,
                  lineNumbers: true,
                  mode: "application/ld+json",
                  highlightDifferences: true
              });

        resize(window.editor)

        editorElement.className += " hidden";
      }
    </script>

    <script src="js/compiled/yizhackclj.js" type="text/javascript"></script>
  </body>
</html>